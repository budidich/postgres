# Цели проекта
Нужно развернуть на компьютере программу 1С:Предприятие Сервер с базой данных на linux.
Нужно развернуть при помощи скриптов контейнеры docker и установить на них postgres.

# Текущая инфраструктура
Имеется компьютер на windows 11, на нем установлены Docker и WSL2 с Ubuntu.
В системе Ubuntu установлен python.
Мы работаем с каталогом /postgres который доступен как из windows так и из Ubuntu.
Нужно сначала подготовить план работ, написать промты для каждого этапа работ.

# Каталоги и ключевые файлы
/postgres - каталог, в котором ведется разработка
/postgres/distr - каталог, в котором находятся дистрибутивы для установки
/postgres/distr/postgresql_17.6_1_ubuntu_24.04_x86_64_package.tar.bz2 - дистрибутив postgres
/postgres/project - каталог, в котором находятся файлы настроек docker и все остальные итоговые настройки.
/postgres/project/init-scripts - каталог, в котором  находятся скрипты для настроек
/postgres/project/data - каталог данных postgres

/postgres/docs - каталог, в котором находится документация, промты и скрипты, запускаемые пользователем в ходе выполнения спринтов.
/postgres/docs/promt_postgres.md - Промт для выполнения всех этапов работ
/postgres/docs/settings.yaml - настройки для выполнения всех этапов работ. Имена всех файлов, используемых в проекте, имена всех глобальных переменных.

/postgres/docs/D1_promt_postgres.md - Промт для выполнения текущего этапа работ
/postgres/docs/D1_bash_script.py - python скрипт для выполнения первого этапа.
/postgres/docs/D1_bash_script_test.py - python скрипт для выполнения тестов по итогам завершения первого этапа.
/postgres/docs/D1_logs.md - файл с логами выполнения первого этапа работ.

# Принцип работы
Развивать проект будем по роадмапу небольшими спринтами, каждый спринт выполняется за несколько итераций. 
В ходе спринта ИИ агент формирует файлы скриптов python и обновляет файл настроек.
Скрипты формируют файлы настроек docker и других а также выполняют процедуры установок файлов. Сообщения при работе скриптов выводятся в файл логов.
Итерация формирования скрипта ИИ агентом завершается, затем пользователь запускает скрипты, на рабочей машине, в результате чего происходит формирование файлов настроек, установка приложений и формирование логов.
Затем полученные файлы логов анализируются пользователем и если тестовый скрипт завершился неудачно, то итерация спринта, например D1 повторяется с 
передачей файла логов и предыдущих скриптов для ИИ агента как входных данных для поиска ошибки.
При этом предполагается, что одна итерация (спринт) может выполняться несколько раз но номер спринта остаётся тем же.
Один и тот же спринт повторяется до тех пор пока тестовый скрипт не будет пройден успешно.

На вход спринта для работы агента подаются файлы:
/postgres/docs/settings.yaml - настройки проекта в целом
/postgres/docs/promt_postgres.md - глобальный промт для общего ознакомления
/postgres/docs/D1_promt_postgres.md - промт текущего спринта, который должен быть выполнен
/postgres/docs/D1_bash_script.py - python скрипт выполнения текущего этапа.
/postgres/docs/D1_logs.md - логи предыдущей попытки выполнения текущего спринта. 
/postgres/project - все файлы каталога project кроме каталога /data

Результатом работы агента являются файлы:
/postgres/docs/settings.yaml - файл с настройками и именами файлов, обновленный по результатам спринта.
/postgres/docs/D1_bash_script.py - python скрипт для выполнения текущего этапа.
/postgres/docs/D1_bash_script_test.py - python скрипт для выполнения тестов по итогам завершения текущего этапа.


# План работ
Спринт D0 Погружение в проект
	Ознакомление с проектом.
	Создание файла /postgres/docs/settings.yaml
	Создание файла /postgres/docs/D1_promt_postgres.md
	Создание файла /postgres/docs/D2_promt_postgres.md

Спринт D1: Проверка работы docker
Цель: Проверить, что docker работает.

Спринт D2: Установка и проверка работы postgres в docker. 
Использовать дистрибутив postgres от компании 1с, который расположен в каталоге distr
Цель: Установить postgres, проверить, что postgres работает корректно.

Спринт D3: Установка и проверка работы 1c-сервер в docker контейнере без подключения к postgres.
Использовать дистрибутив 1c-сервер от компании 1с, который расположен в каталоге distr
Цель: Установить 1c-сервер, проверить, что 1c-сервер работает корректно без подключения к postgres.

Спринт D4: Подключение 1c-сервер к postgres. Развертывание пустой базы.
Реализовать настройки подключения 1c-сервер к postgres.
Цель: Создать устую базу. Продемонстрировать работу пустой базы

Спринт D5: Установка и проверка работы apache в docker. 
Использовать дистрибутив apache, который расположен в каталоге distr
Цель: Установить apache, проверить, что apache работает корректно.

Спринт D6: Публикция пустой базы через веб-сервер apache. 
Цель: Опубликовать базу. Продемонстрировать работу с базой через веб.

